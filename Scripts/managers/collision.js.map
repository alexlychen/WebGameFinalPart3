{"version":3,"sources":["managers/collision.ts"],"names":[],"mappings":"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","file":"managers/collision.js","sourcesContent":["/*\r\n#######################################################################################\r\nThe name of source file : collision.ts\r\nThe information of author :  Giho Kim #300738697\r\nLast Modified by: Giho Kim\r\nLast Modified date: 29 March 2016\r\nProgram Description: The game is to avoid the enemies using the side scroller. User can\r\ncontrol the player by a mouse and the enemies will be generated randomly. Some hearts\r\nalso will be generated as bonus. when user get a bonus, which will give a life.\r\nGood Luck!\r\nRevision History: 1.0\r\n#######################################################################################\r\n*/\r\n\r\nmodule managers {\r\n    // COLLISION MANAGER CLASS\r\n    export class Collision {\r\n        //PRIVATE INSTANCE VARIABLES\r\n        private _player: objects.Player;\r\n\r\n        // CONSTRUCTOR +++++++++++++++++++++\r\n        constructor(player: objects.Player) {\r\n            this._player = player;\r\n        }\r\n\r\n        // PUBLIC METHODS +++++++++++++++++++++++\r\n        public distance(startPoint: createjs.Point, endPoint: createjs.Point): number {\r\n            return Math.sqrt(Math.pow((endPoint.x - startPoint.x), 2) + Math.pow((endPoint.y - startPoint.y), 2))\r\n        }\r\n\r\n        // figure the collision between the play and objects like bonus or enemy \r\n        public check(object: objects.GameObject) {\r\n            var startPoint: createjs.Point = new createjs.Point();\r\n            var endPoint: createjs.Point = new createjs.Point();\r\n            var playerHalfWidth: number = this._player.width * 0.5;\r\n            var objectHalfWidth: number = object.width * 0.5;\r\n            var minimumDistance: number = playerHalfWidth + objectHalfWidth;\r\n\r\n            startPoint.x = this._player.x;\r\n            startPoint.y = this._player.y;\r\n\r\n            endPoint.x = object.centerX + object.x;\r\n            endPoint.y = object.centerY + object.y;\r\n\r\n            // when player crush with objects, it happens something.\r\n            if (this.distance(startPoint, endPoint) < minimumDistance) {\r\n                if (!object.isColliding) {\r\n                    // if player meets enemy, his lives will be deducted.\r\n                    if (object.name === \"enemy\" || object.name === \"enemytwo\") {\r\n                        console.log(\"enemy hit!\");\r\n                        // Add crush with enemy sound\r\n                        createjs.Sound.play(\"bgmcrush\");\r\n                        livesValue--; // lose a life\r\n                        if (livesValue <= 0) {              // if player's lives are less than 0, change the scene to the end scene. \r\n                            createjs.Sound.stop();\r\n                            // Add dead sound\r\n                            createjs.Sound.play(\"bgmdead\");\r\n                            //Show the Game Over Scene\r\n                            scene = config.Scene.END;\r\n                            changeScene();\r\n                        }\r\n                        object._reset(config.Screen.WIDTH + object.width);         // reset the enemy when player meets them.\r\n                    }\r\n\r\n                    // if player meets heart, his lives will be increased.\r\n                    if (object.name === \"bonus\") {\r\n                        console.log(\"bonus hit!\");\r\n                        // Add getting a heart sound\r\n                        createjs.Sound.play(\"bgmGetheart\");\r\n                        livesValue++; // get a life\r\n                        object._reset(config.Screen.WIDTH + object.width); // reset the bonus when player meets them.\r\n                    }\r\n                    object.isColliding = true;\r\n                }\r\n            }\r\n            else {\r\n                object.isColliding = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    export class Shoot {\r\n\r\n        private _name: String;\r\n       \r\n        constructor() {\r\n            this._name = \"Shoot\";\r\n        }\r\n\r\n        public distance(startPoint: createjs.Point, endPoint: createjs.Point): number {\r\n            return Math.sqrt(Math.pow((endPoint.x - startPoint.x), 2) + Math.pow((endPoint.y - startPoint.y), 2))\r\n        }\r\n\r\n        public check(player: objects.Player, objects: objects.GameObject[]) {\r\n            \r\n            var startPoints: createjs.Point[] = new Array<createjs.Point>();\r\n            var endPoints: createjs.Point[] = new Array<createjs.Point>();\r\n            console.log(\"_bulletCount: \", player._bulletCount);\r\n\r\n            for (var i = 0; i < player._bulletCount; i++) {\r\n\r\n                var bulletHalfWidth: number = player._bullets[i].width * 0.5;\r\n                startPoints[i].x = player._bullets[i].x;\r\n                startPoints[i].y = player._bullets[i].x;\r\n                console.log(\"bullet B...\");\r\n\r\n                for (var j = 0; j < objects.length; j++) {\r\n\r\n                    var objectHalfWidth: number = objects[j].width * 0.5;\r\n                    var minimumDistance: number = bulletHalfWidth + objectHalfWidth;\r\n\r\n                    endPoints[j].x = objects[j].centerX + objects[j].x;\r\n                    endPoints[j].y = objects[j].centerY + objects[j].y;\r\n                    console.log(\"bullet C...\");\r\n\r\n                    if (this.distance(startPoints[i], endPoints[i]) < minimumDistance) {\r\n\r\n                        player._bullets[i].isColliding = true;\r\n                        objects[j].isColliding = true;//shoot you!\r\n\r\n                        if (objects[j].name === \"enemy\" || objects[j].name === \"enemytwo\") {\r\n                            console.log(\"shot enemy\");\r\n                            createjs.Sound.play(\"bgmcrush\");\r\n                            objects[j]._reset(config.Screen.WIDTH + objects[j].width);\r\n                        }\r\n                    } else {\r\n                        objects[j].isColliding = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    export class Shot {\r\n\r\n        private _name: String;\r\n\r\n        constructor() {\r\n            this._name = \"Shoot\";\r\n        }\r\n\r\n        public distance(startPoint: createjs.Point, endPoint: createjs.Point): number {\r\n            return Math.sqrt(Math.pow((endPoint.x - startPoint.x), 2) + Math.pow((endPoint.y - startPoint.y), 2))\r\n        }\r\n\r\n        public check(bullet: objects.Bullet, object: objects.GameObject) {\r\n\r\n            var startPoint: createjs.Point = new createjs.Point();\r\n            var endPoint: createjs.Point = new createjs.Point();\r\n\r\n            var bulletHalfWidth: number = bullet.width * 0.5;\r\n            startPoint.x = bullet.x;\r\n            startPoint.y = bullet.x;\r\n\r\n            var objectHalfWidth: number = object.width * 0.5;\r\n            var minimumDistance: number = bulletHalfWidth + objectHalfWidth;\r\n\r\n            endPoint.x = object.centerX + object.x;\r\n            endPoint.y = object.centerY + object.y;\r\n\r\n            if (this.distance(startPoint, endPoint) < minimumDistance) {\r\n\r\n                bullet.isColliding = true;\r\n                stage.removeChild(bullet);\r\n                \r\n                object.isColliding = true;//shoot you!\r\n\r\n                if (object.name === \"enemy\" || object.name === \"enemytwo\") {\r\n                    console.log(\"shot enemy\");\r\n                    createjs.Sound.play(\"bgmcrush\");\r\n                    object._reset(config.Screen.WIDTH + object.width);\r\n                }\r\n            } else {\r\n                object.isColliding = false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n}"],"sourceRoot":"/source/"}